{% assign totalbndls = 0 %}{% assign totalgifts = 0 %}
{% for tag in product.tags %}
  {% if tag contains 'bndl-' %}{% assign bundle = true %}{% assign totalbndls = totalbndls | plus: 1 %}
  {% elsif tag contains 'gift-' %}{% assign bundle = true %}{% assign totalgifts = totalgifts | plus: 1 %}
  {% endif %}
{% endfor %}
<style>form#AddToCartForm>div.grid__item.row_grid_qnt{display:none;}</style>
{% if bundle %}
  <center style="color:#ff8e9e;width:100%;margin:15px 0;font-weight:bold;font-size:25px;">Bundle & save<br>Your family pack is here!</center>
  <p class="start tap">Design your first stamp</p>
{% else %}
  <center style="color:#000;width:100%;margin:15px 0;font-weight:bold;font-family:Nunito;font-size:22px;">Make your own personalized stamp just in 3 easy steps! 👇</center>
  <p class="start tap btn btn--primary btn--add-to-cart full">Press To Customize Your Stamp</p>
{% endif %}
<div class="popup">
  {%- form 'product', product, class: form_classes, id: form_id, data-product-form: '' -%}
    <div class="head">  
      <h3><span>Personalize your stamp</span><i class="fas fa-times"></i></h3>
      <p class="bar"><span></span></p>
    </div>
    <input type="hidden" id="Quantity" name="quantity" value="1" class="product-form__input prod_qty_mobile">
    <div class="steps">
      <div class="step1">
        <h4>1. Choose Stamp Design</h4>
        <style>
          div.swatch_options{width:100%;} div.swatch.clearfix{display:flex;justify-content:flex-start;flex-wrap:wrap;margin-top:10px;}
          div.swatch.clearfix>div.header{display:none;}
        </style>
        <div class="grid grid-small">
          {%- for option in product.options_with_values -%}
          {%- liquid
                        assign is_color_option = false
                        if content_for_header contains 'debutify' and product.available and product.variants.size >= 1 and settings.dbtfy_color_swatches
                          assign swatch_list = settings.dbtfy_color_swatches_color | split: ","
                          for swatch in swatch_list
                            assign swatch_option_name = swatch | handleize
                            assign option_name = option.name | handleize
                            if option_name == swatch_option_name
                              assign is_color_option = true
                            endif
                          endfor
                        endif
                        assign first_option_value = current_variant.options[forloop.index0] | escape
                      -%}
          <div class="grid__item radio-wrapper product-form__item"{%- if is_color_option -%} hidden{%- endif -%}>
            <label class="single-option-radio__label"
                   for="ProductSelect-option-{{ forloop.index0 }}"
                   data-option-name="{{ option.name | escape }}">
              {{ option.name | escape }}: <span class="variant-label-option-value">{{ first_option_value | escape }}</span>
            </label>
            {%- if section.settings.product_selector == 'radio' -%}
            <fieldset class="single-option-radio inline-list"
                      id="ProductSelect-option-{{ forloop.index0 }}">
              {%- assign option_index = forloop.index -%}
              {%- for value in option.values -%}
              {%- liquid
                                assign variant_label_state = true
                                if product.options.size == 1
                                  unless product.variants[forloop.index0].available
                                    assign variant_label_state = false
                                  endunless
                                endif
                              -%}
              <input type="radio"
                     {% if option.selected_value == value -%} checked="checked"{% endif %}
                     value="{{ value | escape }}"
                     data-index="option{{ option_index }}"
                     name="option{{ option.position }}"
                     class="single-option-selector__radio js-single-option-selector"
                     id="ProductSelect-option-{{ section.id }}-{{ option.name | handleize }}-{{ value | escape }}">
              <label for="ProductSelect-option-{{ section.id }}-{{ option.name | handleize }}-{{ value | escape }}"{% unless variant_label_state %} class="text-strike"{% endunless %}>
                {% if option.name contains 'olor' %}
                {{ value | handleize | append: '.jpg' | file_img_url: 'medium' | img_tag }}
                {% else %}
                {{ value | escape }}
                {% endif %}
              </label>
              {%- endfor -%}
            </fieldset>
            {%- else -%}
            <select name="option{{ option.position }}"
                    class="single-option-list-type single-option-selector__radio single-option-selector-{{ section.id }} product-form__input select--small js-single-option-selector"
                    id="SingleOptionSelector-{{ forloop.index0 }}"
                    data-index="option{{ forloop.index }}">
              {%- for value in option.values -%}
              <option value="{{ value | escape }}"{% if option.selected_value == value %} selected="selected"{% endif %}>{{ value | escape }}</option>
              {%- endfor -%}
            </select>
            {%- endif -%}
          </div>
          {%- endfor -%}
        </div>
        <select name="id" id="MainProductSelect-{{ product.id }}" class="product-single__variants no-js product-form__item" data-section-id="{{ section.id }}">
          {% for variant in product.variants %}
          {%- liquid
                        assign product_qty = 0
                        if variant.inventory_management == "shopify"
                          if variant.inventory_policy == "continue"
                            assign product_qty = 99999
                          else
                            if variant.inventory_quantity > 0
                              assign product_qty = variant.inventory_quantity
                            else
                              assign product_qty = 0
                            endif
                          endif
                        else
                          assign product_qty = 99999
                        endif
                      -%}
          <option {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                  {% unless variant.available %}disabled="disabled"{% endunless %} data-sku="{{ variant.sku }}"
                  data-image="{{variant.image | img_url}}" data-inventory-policy="{{ variant.inventory_policy }}"
                  data-inventory-quantity="{{ product_qty }}" data-product-qty="{{ product_qty }}" value="{{ variant.id }}"
                  data-option-1="{{ variant.option1 }}" data-option-2="{{ variant.option2 }}" data-option-3="{{ variant.option3 }}">
            {%- if variant.available -%}
            {{ variant.title }} - {{ variant.price | money_with_currency }}
            {%- else -%}
            {{ variant.title }} - {{ 'products.product.sold_out' | t }}
            {%- endif -%}
          </option>
          {% endfor %}
        </select>
      </div>
      <div class="step2">
        <h4>2. Add Text</h4>
        <div class="spb-label-tooltip">
          <label for="first" class="spb-productdescfont spb-productdesctextcolor txt">First Line <span>Any letter / number | No icons / emoji</span></label>
          <input id="first" type="text" name="properties[Line 1]" autocomplete="off" class="spb-productdescfont spb-productoptiontextcolor spb-productoptionbackground" placeholder="Line 1 (e.g. Mary)" maxlength="12" size="12" required>
          <span><span>0</span> / 12</span>
        </div>
        <div class="spb-label-tooltip">
          <label for="second" class="spb-productdescfont spb-productdesctextcolor txt">Second Line <span>(Optional)</span></label>
          <input id="second" type="text" name="properties[Line 2]" autocomplete="off" class="spb-productdescfont spb-productoptiontextcolor spb-productoptionbackground" placeholder="Line 2 (e.g. Simmons)" maxlength="10" size="10">
          <span><span>0</span> / 10</span>
        </div>
      </div>
      <div class="step3">
        <h4>3. Pick Icon</h4>
        <label for="noicon">
          <input id="noicon" type="radio" name="properties[Icon]" class="fas fa-check" value="No icon"> I don't want an icon
        </label>
        <div>
          <ul>
            {% for i in (1..3) %}
              {% assign set = 'iconstitle' | append: i %}
              {% if section.settings[set] != blank %}
                <li class="{{ section.settings[set] }}{% if i == 1 %} checked{% endif %}">{{ section.settings[set] }}</li>
              {% endif %}
            {% endfor %}
          </ul>
          {% for i in (1..3) %}
            {% assign set = 'iconstitle' | append: i %}{% assign iconsset = 'icons' | append: i %}
            {% assign icons = section.settings[iconsset] | replace: ', ',',' | replace: ' ,',',' | split: ',' %}
          	{% if section.settings[set] != blank and icons.size > 0 %}
              <div class="spb-label-tooltip icons {{ section.settings[set] }}{% if i == 1 %} active{% endif %}">
                {% for icon in icons %}
                  <input type="radio" name="properties[Icon]" id="Icon{{ i }}{{ icon }}" class="spb-productdescfont spb-productoptiontextcolor spb-productoptionbackground" value="{{ icon }}">
                  <label for="Icon{{ i }}{{ icon }}" class="spb-productdescfont spb-productdesctextcolor">{{ icon | append: '.png' | file_img_url: 'small' | img_tag }}</label>
                {% endfor %}
              </div>
          	{% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="preview">
      <span>Your Stamp Will Look Like This 👉</span>
      <div class="spb-label-tooltip"><img><div><p class="first"></p><p class="second"></p></div></div>
      <img>
      {% if bundle %}
        {% if totalbndls > 0 %}
	      <p class="start" text="Great! Click to design your next stamp">YOU MUST CHOOSE A DESIGN</p>
        {% else %}
	      <p class="start" text="Awesome! Click to choose your gift">YOU MUST CHOOSE A DESIGN</p>
        {% endif %}
      {% else %}
        <div class="row_grid_qnt" style="width:100%;">
          <p text="ADD TO CART — {{ product.price | money }}" class="disabled btn_sp addtocart_btn bndl stiky_button{% if section.settings.enable_payment_button %} dynamic_paybtn{% endif %}{% if section.settings.shake_effect_enable %} js-cartButtonPro-addToCartButton hvr-wobble-horizontal{% endif %}">YOU MUST CHOOSE A DESIGN</p>
        </div>
      {% endif %}
    </div>
    {% include 'product-page-features' %}
    <input required type="hidden" id="upsellcheckquantity" name="properties[upsellcheckquantity]">
  {%- endform -%}
  {% assign form_cls = form_classes | remove: ' active' %}
  {% assign bndls = 0 %}{% assign gifts = 0 %}
  {% for tag in product.tags %}
    {% if tag contains 'bndl-' %}{% assign bndls = bndls | plus: 1 %}
      {% assign prod = tag | split: '_' | last %}{% render 'preview' product: all_products[prod], order: bndls, total: totalbndls, gifts: totalgifts, form_classes: form_cls %}
    {% endif %}
  {% endfor %}
  {% for tag in product.tags %}
    {% if tag contains 'gift-' %}{% assign gifts = gifts | plus: 1 %}
      {% assign prod = tag | split: '_' | last %}{% render 'gift' product: all_products[prod], order: gifts, total: totalgifts, form_classes: form_cls %}
    {% endif %}
  {% endfor %}
  {%- form 'product', product, class: form_cls, id: "", data-product-form: '' -%}
    <div class="head">  
      <h3><span>Stamp{% if bndls > 0 or gifts > 0 %}s bundle{% endif %} added to cart</span><i class="fas fa-times"></i></h3>
      <p class="bar"><span style="width:90%;"></span></p>
    </div>
	<div class="steps congrats">
      <div>
        <img src="https://cdn.shopify.com/s/files/1/0512/5665/6053/files/Stamp_SET_001-33.png?v=1658420832" width="100px">
<!--<svg width="114" height="116" viewBox="0 0 114 116" fill="none" xmlns="http://www.w3.org/2000/svg"> <g filter="url(#filter0_d_146_473)"> <path d="M25.8041 95.2096L77.8905 71.0593L40.6728 33.8415L16.5227 85.905C16.1763 86.7361 14.8603 90.084 18.439 93.2702C22.3178 96.7102 24.9729 95.5559 25.8041 95.2096Z" fill="url(#paint0_linear_146_473)"/> <path d="M35.4547 45.0847L31.5759 53.5118C30.3292 56.5365 52.4477 78.8625 64.9382 77.0617L77.8905 71.0589C62.537 78.147 33.5615 49.1942 35.4547 45.0847Z" fill="url(#paint1_linear_146_473)"/> <path d="M27.6048 62.0771L26.7044 63.9935L23.6568 70.5502C23.6337 73.1361 36.9555 86.4347 45.2903 86.1579L55.8647 81.263C44.4129 83.2488 26.2888 64.8706 27.6048 62.0771Z" fill="url(#paint2_linear_146_473)"/> <path d="M16.7764 85.3979C17.8846 87.6145 23.3103 93.0169 27.8125 94.2868L38.9871 89.1151L39.0563 89.069C32.1761 92.2319 20.5397 80.5034 20.3319 77.7789L16.7764 85.3979Z" fill="url(#paint3_linear_146_473)"/> <path opacity="0.75" d="M25.8041 95.2096L77.8905 71.0593L40.6728 33.8415L16.5227 85.905C16.1763 86.7361 14.8603 90.084 18.439 93.2702C22.3178 96.7102 24.9729 95.5559 25.8041 95.2096Z" fill="url(#paint4_radial_146_473)"/> <path opacity="0.75" d="M25.8041 95.2096L77.8905 71.0593L40.6728 33.8415L16.5227 85.905C16.1763 86.7361 14.8603 90.084 18.439 93.2702C22.3178 96.7102 24.9729 95.5559 25.8041 95.2096Z" fill="url(#paint5_radial_146_473)"/> <path d="M58.474 34.0254C57.8506 35.2952 56.6268 35.4799 55.7266 35.2029L57.2041 32.2707C57.2041 32.2707 58.8664 32.6401 58.9128 31.5549L58.9819 33.0787L58.474 34.0254Z" fill="url(#paint6_linear_146_473)"/> <path d="M62.6069 17.8643C62.6069 17.8643 63.6688 17.3795 64.3383 15.9942C65.0082 14.6089 61.7063 12 61.7063 12L60.1597 14.7013C60.1597 14.7013 62.7686 16.4098 61.9605 16.987C61.1294 17.5642 62.6069 17.8643 62.6069 17.8643Z" fill="url(#paint7_linear_146_473)"/> <path d="M89.6194 40.0755C90.1042 35.8273 87.2412 34.4189 86.2024 34.5344C86.2024 34.5344 86.0174 33.1491 87.8647 32.7104C89.0881 32.4334 92.2053 35.2039 91.3972 38.3439L89.6194 40.0755Z" fill="url(#paint8_linear_146_473)"/> <path d="M78.3293 70.7365C75.7434 73.3224 65.3074 67.0424 54.987 56.7454C44.6898 46.448 38.4099 35.989 40.9957 33.4032C43.5816 30.8173 54.0173 37.0973 64.3377 47.3947C74.6351 57.7151 80.8917 68.1506 78.3293 70.7365Z" fill="url(#paint9_linear_146_473)"/> <path d="M77.4521 69.027C75.4897 70.9894 66.1159 64.8019 56.5345 55.1975C46.9529 45.5927 40.7423 36.242 42.7047 34.2796C44.6672 32.3171 54.0408 38.5047 63.6226 48.1094C73.204 57.7138 79.4145 67.0646 77.4521 69.027Z" fill="url(#paint10_linear_146_473)"/> <path d="M64.3151 15.995C64.3151 15.995 63.1147 18.5578 62.9531 18.8348C62.3527 19.8507 60.667 20.197 57.6428 19.7815C54.6182 19.3659 53.741 19.5275 53.6024 19.5506C53.4638 19.5968 51.686 18.1653 51.686 18.1653L51.8477 16.7107C51.8477 16.7107 52.263 16.1566 53.6485 16.3413C56.1188 16.7107 63.3915 17.9344 64.3151 15.995Z" fill="url(#paint11_linear_146_473)"/> <path d="M70.318 58.8682C72.7422 56.0977 75.0048 58.2682 76.436 56.2823L73.9887 53.789C72.5572 55.7514 70.4796 53.9046 67.9167 56.6056L70.318 58.8682Z" fill="url(#paint12_linear_146_473)"/> <path d="M44.0205 25.2528C47.3683 27.2383 44.3899 29.9628 46.2831 31.5097L48.8921 29.1777C46.9989 27.6309 49.7233 24.9526 46.3755 22.9671L44.0205 25.2528Z" fill="url(#paint13_linear_146_473)"/> <path d="M79.4611 35.5259C79.5536 35.5028 79.5997 34.9487 80.9617 33.979C82.3241 33.0093 85.3949 34.5101 85.7872 34.7409C86.2029 34.9718 85.8567 38.7813 85.8567 38.7813C85.8567 38.7813 82.0239 34.6947 80.1076 35.6414C78.1912 36.5649 79.4611 35.5259 79.4611 35.5259Z" fill="url(#paint14_linear_146_473)"/> <path d="M79.9684 45.0159C79.9684 45.0159 79.8298 46.5167 79.1373 47.2092C77.8904 48.433 75.905 46.5858 73.3882 47.2553C73.3882 47.2553 74.5425 44.3232 74.6581 44.0923C74.6581 44.0923 75.6738 43.469 76.713 44.0693C77.7749 44.6464 78.6985 44.8312 79.345 44.4849C79.9914 44.1385 79.9684 45.0159 79.9684 45.0159Z" fill="url(#paint15_linear_146_473)"/> <path d="M86.7329 38.4119C86.7329 38.4119 84.2622 39.5432 83.939 39.7048C83.6157 39.8664 82.8771 34.1175 84.6549 33.5403C86.4557 32.9631 87.6796 32.7553 87.8642 32.7322C88.0489 32.686 84.7705 33.0323 86.7329 38.4119Z" fill="#FFBF00"/> <path d="M79.137 47.1854C80.1532 46.1231 81.5382 44.5533 81.4691 44.1146C81.1459 41.2979 78.8603 35.0872 80.9613 33.9559C80.9613 33.9559 78.9984 35.3412 78.3984 35.7567C77.798 36.1723 77.3593 37.2806 77.4057 39.1045C77.5209 42.2907 80.0607 46.2387 79.137 47.1854Z" fill="#FFBF00"/> <path d="M72.1188 24.3974C70.4336 36.2415 58.6816 47.5546 58.6816 47.5546L60.2748 49.9789C60.2748 49.9789 73.0655 36.6571 74.7047 24.7668L72.1188 24.3974Z" fill="url(#paint16_linear_146_473)"/> <path d="M50.4387 19.4573C50.1616 19.9652 50.9697 20.8194 52.909 23.1744C54.8484 25.5294 59.882 31.7632 58.4505 34.0258L59.9971 30.8396C59.9971 30.8396 60.0202 28.3 58.4965 25.8295C56.0953 21.9508 51.501 17.7718 51.8472 16.7328L50.4387 19.4573Z" fill="url(#paint17_linear_146_473)"/> <path d="M60.7362 55.4969C61.2591 55.4969 61.6829 55.073 61.6829 54.5502C61.6829 54.0274 61.2591 53.6035 60.7362 53.6035C60.2134 53.6035 59.7896 54.0274 59.7896 54.5502C59.7896 55.073 60.2134 55.4969 60.7362 55.4969Z" fill="url(#paint18_linear_146_473)"/> <path d="M73.9196 16.1561C74.4424 16.1561 74.8662 15.7323 74.8662 15.2095C74.8662 14.6867 74.4424 14.2629 73.9196 14.2629C73.3967 14.2629 72.9729 14.6867 72.9729 15.2095C72.9729 15.7323 73.3967 16.1561 73.9196 16.1561Z" fill="url(#paint19_linear_146_473)"/> <path d="M65.0299 29.8931C65.5527 29.8931 65.9766 29.4692 65.9766 28.9464C65.9766 28.4236 65.5527 27.9998 65.0299 27.9998C64.5071 27.9998 64.0833 28.4236 64.0833 28.9464C64.0833 29.4692 64.5071 29.8931 65.0299 29.8931Z" fill="url(#paint20_linear_146_473)"/> <path d="M70.6408 47.2326C71.1636 47.2326 71.5874 46.8088 71.5874 46.286C71.5874 45.7631 71.1636 45.3393 70.6408 45.3393C70.1179 45.3393 69.6941 45.7631 69.6941 46.286C69.6941 46.8088 70.1179 47.2326 70.6408 47.2326Z" fill="url(#paint21_linear_146_473)"/> <path d="M94.9762 44.9242C95.4986 44.9242 95.9225 44.5004 95.9225 43.9776C95.9225 43.4549 95.4986 43.031 94.9762 43.031C94.4534 43.031 94.0295 43.4549 94.0295 43.9776C94.0295 44.5004 94.4534 44.9242 94.9762 44.9242Z" fill="url(#paint22_linear_146_473)"/> <path d="M88.9498 64.8957C89.4727 64.8957 89.8965 64.4718 89.8965 63.949C89.8965 63.4262 89.4727 63.0023 88.9498 63.0023C88.427 63.0023 88.0032 63.4262 88.0032 63.949C88.0032 64.4718 88.427 64.8957 88.9498 64.8957Z" fill="url(#paint23_linear_146_473)"/> <path d="M85.0019 52.7033C85.5248 52.7033 85.9486 52.2795 85.9486 51.7567C85.9486 51.2339 85.5248 50.81 85.0019 50.81C84.4795 50.81 84.0557 51.2339 84.0557 51.7567C84.0557 52.2795 84.4795 52.7033 85.0019 52.7033Z" fill="url(#paint24_linear_146_473)"/> <path d="M90.1967 26.9851C90.7195 26.9851 91.1433 26.5613 91.1433 26.0384C91.1433 25.5157 90.7195 25.0919 90.1967 25.0919C89.6738 25.0919 89.25 25.5157 89.25 26.0384C89.25 26.5613 89.6738 26.9851 90.1967 26.9851Z" fill="url(#paint25_linear_146_473)"/> <path d="M79.5758 30.0785C80.0986 30.0785 80.5225 29.6547 80.5225 29.1319C80.5225 28.6091 80.0986 28.1853 79.5758 28.1853C79.053 28.1853 78.6292 28.6091 78.6292 29.1319C78.6292 29.6547 79.053 30.0785 79.5758 30.0785Z" fill="url(#paint26_linear_146_473)"/> <path d="M71.4718 67.4807C81.1223 59.5615 97.4686 57.9223 97.4686 57.9223L97.9999 54.2743C97.9999 54.2743 78.652 56.5829 68.4011 65.4718C69.509 66.2339 70.5252 66.9033 71.4718 67.4807Z" fill="url(#paint27_linear_146_473)"/> <path d="M47.2529 44.669C47.8994 45.5464 48.6151 46.4237 49.3769 47.3474C51.4318 42.822 50.9931 39.2664 50.9931 39.2664L48.4766 37.6964C48.7305 40.4901 47.8763 43.1683 47.2529 44.669Z" fill="url(#paint28_linear_146_473)"/> </g> <defs> <filter id="filter0_d_146_473" x="0" y="0" width="114" height="115.676" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood flood-opacity="0" result="BackgroundImageFix"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/> <feOffset dy="4"/> <feGaussianBlur stdDeviation="8"/> <feComposite in2="hardAlpha" operator="out"/> <feColorMatrix type="matrix" values="0 0 0 0 0.6875 0 0 0 0 0.6875 0 0 0 0 0.6875 0 0 0 0.5 0"/> <feBlend mode="multiply" in2="BackgroundImageFix" result="effect1_dropShadow_146_473"/> <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_146_473" result="shape"/> </filter> <linearGradient id="paint0_linear_146_473" x1="13.4661" y1="41.1149" x2="54.6727" y2="89.947" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#FBE07A"/> <stop offset="1" stop-color="#FF40BF"/> </linearGradient> <linearGradient id="paint1_linear_146_473" x1="35.8603" y1="44.6881" x2="70.0562" y2="78.884" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#9F00E8"/> <stop offset="1" stop-color="#7000A3"/> </linearGradient> <linearGradient id="paint2_linear_146_473" x1="26.382" y1="63.3042" x2="50.0982" y2="87.0201" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#9F00E8"/> <stop offset="1" stop-color="#7000A3"/> </linearGradient> <linearGradient id="paint3_linear_146_473" x1="19.2129" y1="78.8662" x2="34.2217" y2="93.8751" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#9F00E8"/> <stop offset="1" stop-color="#7000A3"/> </linearGradient> <radialGradient id="paint4_radial_146_473" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(35.7943 57.4545) rotate(119.598) scale(23.6558 7.24219)"> <stop stop-color="white" stop-opacity="0.5"/> <stop offset="1" stop-color="white" stop-opacity="0"/> </radialGradient> <radialGradient id="paint5_radial_146_473" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(52.4177 78.6601) rotate(151.7) scale(37.4989 11.6955)"> <stop stop-color="#440063" stop-opacity="0.75"/> <stop offset="1" stop-color="#420061" stop-opacity="0"/> </radialGradient> <linearGradient id="paint6_linear_146_473" x1="58.649" y1="33.1629" x2="64.3161" y2="31.353" gradientUnits="userSpaceOnUse"> <stop stop-color="#BD2719"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint7_linear_146_473" x1="63.9181" y1="19.1019" x2="61.3807" y2="12.798" gradientUnits="userSpaceOnUse"> <stop stop-color="#BD2719"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint8_linear_146_473" x1="92.139" y1="38.3552" x2="82.6881" y2="32.2994" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint9_linear_146_473" x1="67.924" y1="26.0047" x2="46.8075" y2="92.5806" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#FBE07A"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint10_linear_146_473" x1="74.8573" y1="41.2863" x2="42.4492" y2="64.0161" gradientUnits="userSpaceOnUse"> <stop stop-color="#FBE07A"/> <stop offset="1" stop-color="white"/> </linearGradient> <linearGradient id="paint11_linear_146_473" x1="48.7711" y1="18.1859" x2="59.238" y2="18.0274" gradientUnits="userSpaceOnUse"> <stop stop-color="#BD2719"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint12_linear_146_473" x1="73.4097" y1="54.2799" x2="70.8925" y2="58.7963" gradientUnits="userSpaceOnUse"> <stop stop-color="#FF9214"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint13_linear_146_473" x1="44.0056" y1="19.5644" x2="47.8116" y2="30.454" gradientUnits="userSpaceOnUse"> <stop stop-color="#80DAFE"/> <stop offset="1" stop-color="#008EE6"/> </linearGradient> <linearGradient id="paint14_linear_146_473" x1="82.9011" y1="40.7242" x2="82.0296" y2="29.7393" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint15_linear_146_473" x1="73.6746" y1="45.3549" x2="79.7442" y2="46.3381" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint16_linear_146_473" x1="69.5039" y1="24.8236" x2="60.4998" y2="61.8779" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#E100FF"/> <stop offset="1" stop-color="#7000A3"/> </linearGradient> <linearGradient id="paint17_linear_146_473" x1="51.7943" y1="18.7526" x2="58.4549" y2="29.8537" gradientUnits="userSpaceOnUse"> <stop stop-color="#FF9214"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint18_linear_146_473" x1="58.9257" y1="49.2221" x2="62.52" y2="59.7947" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint19_linear_146_473" x1="71.0319" y1="10.4751" x2="76.9523" y2="20.2017" gradientUnits="userSpaceOnUse"> <stop stop-color="#FBE07A"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint20_linear_146_473" x1="64.8889" y1="28.4226" x2="66.3689" y2="34.026" gradientUnits="userSpaceOnUse"> <stop stop-color="#80DAFE"/> <stop offset="1" stop-color="#008EE6"/> </linearGradient> <linearGradient id="paint21_linear_146_473" x1="70.0028" y1="44.4883" x2="70.9062" y2="47.073" gradientUnits="userSpaceOnUse"> <stop stop-color="#80DAFE"/> <stop offset="1" stop-color="#008EE6"/> </linearGradient> <linearGradient id="paint22_linear_146_473" x1="95.6627" y1="41.7678" x2="93.971" y2="47.1599" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint23_linear_146_473" x1="88.671" y1="57.9005" x2="89.1995" y2="69.4246" gradientUnits="userSpaceOnUse"> <stop stop-color="#FFCB4B"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> <linearGradient id="paint24_linear_146_473" x1="84.3821" y1="49.9676" x2="85.2852" y2="52.5522" gradientUnits="userSpaceOnUse"> <stop offset="0.2544" stop-color="#9F00E8"/> <stop offset="1" stop-color="#7000A3"/> </linearGradient> <linearGradient id="paint25_linear_146_473" x1="92.0342" y1="22.884" x2="88.5453" y2="28.9103" gradientUnits="userSpaceOnUse"> <stop stop-color="#80DAFE"/> <stop offset="1" stop-color="#008EE6"/> </linearGradient> <linearGradient id="paint26_linear_146_473" x1="79.3318" y1="27.7888" x2="80.4946" y2="34.238" gradientUnits="userSpaceOnUse"> <stop stop-color="#FF9214"/> <stop offset="1" stop-color="#FF4E0D"/> </linearGradient> <linearGradient id="paint27_linear_146_473" x1="61.8581" y1="60.3991" x2="95.5664" y2="61.0916" gradientUnits="userSpaceOnUse"> <stop stop-color="#80DAFE"/> <stop offset="1" stop-color="#008EE6"/> </linearGradient> <linearGradient id="paint28_linear_146_473" x1="43.2371" y1="56.6492" x2="51.3179" y2="36.5627" gradientUnits="userSpaceOnUse"> <stop stop-color="#FBE07A"/> <stop offset="1" stop-color="#E81CA2"/> </linearGradient> </defs>
</svg>-->        
	    <h3>Congratulations!</h3>
        <h4>We added your unique stamp{% if bndls > 0 or gifts > 0 %}s bundle{% endif %} to your cart</h4>
        <p class="start again">PERSONALIZE ANOTHER STAMP</p>
        <h5{% if cart.total_price >= fsh %} style="display:none;"{% endif %}>✈️ Get FREE SHIPPING if you configure another stamp ✈️</h5>
        <a href="/checkout" class="next">CHECKOUT NOW</a>
      </div>
    </div>
  {%- endform -%}
  {%- form 'product', product, class: form_cls, id: "", data-product-form: '' -%}
    <div class="head">  
      <h3 style="justify-content:flex-start;"><i class="fas fa-arrow-left"></i> <span>Choose Your New Stamp</span></h3>
      <p class="bar"><span style="width:10%;"></span></p>
    </div>
    <div class="steps congrats new">
      <p class="start again next">PERSONALIZE SAME STAMP {% if bndls > 0 or gifts > 0 %}BUNDLE{% else %}COLLECTION{% endif %}</p>
      <p>You can choose a different design from this collection</p>
      <h3>OR</h3>
      <h4>Tap to personalize new stamp model</h4>
      <div class="grid grid-spacer collection-list-products">
        {% for prod in collections.products.products %}
	      {% if prod.title contains 'TheNameStamp™️ -' and prod != product %}
	        {% render 'product-grid-item', product: prod %}
	      {% endif %}
	    {% endfor %}
	  </div>
	</div>
  {%- endform -%}
</div>
<script>
  function getCookie(name) {
    const matches = document.cookie.match(new RegExp(
      "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ));
    return matches ? decodeURIComponent(matches[1]) : undefined;
  }
  if (getCookie('opn') == '1' || getCookie('opn') == 1){
    document.querySelector('div.popup').classList.add('open');
    document.querySelector('body').classList.add('noscroll');
    document.cookie = 'opn=""; path=/; domain=thenamestamp.co; secure=true; expires=-1';
    //window.onload=()=>{Intercom('update', {"hide_default_launcher": true});}
  }
  {% if product.tags contains 'bundle' %}document.querySelector('button#AddToCart').classList.add('bndl');{% endif %}
  document.querySelector('p.start.tap').onclick = function(){
    this.nextElementSibling.classList.add('open');
    document.querySelector('body').classList.add('noscroll');
    //Intercom('update', {"hide_default_launcher": true});
  }
  document.querySelector('div.popup').onclick=function(e){
    if (e.target == this || e.target.classList.contains('fa-times')){
      this.classList.remove('open');
      document.querySelector('body').classList.remove('noscroll');
      //Intercom('update', {"hide_default_launcher": false});
    }
  }
  const forms = document.querySelectorAll('form.product-single__form');
  [].forEach.call(forms, form=>{
    if (form.querySelector('input#first')){form.querySelector('input#first').value = '';}
    if (form.querySelector('input#second')){form.querySelector('input#second').value = '';}
    if (form.querySelector('div.step3 input:checked')){
      form.querySelector('div.step3 input:checked').checked = false;
    }
    if (form.querySelector('p.start')){
      var btn = form.querySelector('p.start');
      if (!btn.classList.contains('again')){btn.classList.add('disabled');}
    } else if (form.querySelector('.btn_sp.addtocart_btn.bndl')){
      var btn = form.querySelector('.btn_sp.addtocart_btn.bndl');
    } else {
      var btn = null;
    }
    let swatches = form.querySelectorAll('fieldset.single-option-radio.inline-list>input.single-option-selector__radio.js-single-option-selector');
    [].forEach.call(swatches, swatch=>{swatch.checked = false;
      swatch.onchange=()=>{
        if (swatch.checked && form.querySelector('div.step2')){
          form.querySelector('div.step2').classList.add('show');
          form.querySelector('p.bar>span').style.minWidth = '60%';
          form.querySelector('div.preview>img').src = swatch.nextElementSibling.firstElementChild.src;
          if (btn && btn.classList.contains('disabled')){btn.innerHTML = 'YOU NEED TO ADD TEXT';}
        } else if (swatch.checked){
          form.querySelector('p.bar>span').style.width = '85%';
          if (btn.hasAttribute('text')){btn.innerHTML = btn.getAttribute('text');}
          btn.classList.remove('disabled');
        }
      }
    });
    let inputs = form.querySelectorAll('input.spb-productdescfont.spb-productoptiontextcolor.spb-productoptionbackground');
    [].forEach.call(inputs, input=>{
      input.onkeyup=()=>{
        input.nextElementSibling.firstElementChild.innerHTML = input.value.length;
        form.querySelector('p.'+input.id).innerHTML = input.value;
        if (input.id == 'first' && input.value.length > 0){
          form.querySelector('div.step3').classList.add('show');
          if (form.querySelector('div.step3 input:checked')){
            form.querySelector('p.bar>span').style.width = '85%';
          } else {
            form.querySelector('p.bar>span').style.width = '75%';
          }
          if (btn){
            if (btn.hasAttribute('text')){btn.innerHTML = btn.getAttribute('text');}
            btn.classList.remove('disabled');
          }
        } else if (input.id == 'first' && input.value.length < 1){
          form.querySelector('div.step3').classList.remove('show');
          form.querySelector('p.bar>span').style.width = '60%';
          if (btn){btn.innerHTML = 'YOU NEED TO ADD TEXT'; btn.classList.add('disabled');}
        } else if (input.id == 'second' && input.parentElement.previousElementSibling.children[1].value.length < 1 && btn){
          btn.innerHTML = "YOU CAN'T LEAVE THE FIRST LINE EMPTY";
        }
      }
    });
    let sets = form.querySelectorAll('div.step3 ul>li');
    [].forEach.call(sets, set=>{
      set.onclick=()=>{
        [].forEach.call(sets, el=>{el.classList.remove('checked');});
        set.classList.add('checked');
        form.querySelector('div.spb-label-tooltip.icons.active').classList.remove('active');
        form.querySelector('div.spb-label-tooltip.icons.'+set.classList[0]).classList.add('active');
      }
    });
    let icons = form.querySelectorAll('div.step3 input');
    [].forEach.call(icons, icon=>{
      icon.onchange=()=>{
        if (icon.id == 'noicon'){
          form.querySelector('div.preview>div.spb-label-tooltip>img').src = '';
          form.querySelector('div.preview>div.spb-label-tooltip>img').removeAttribute('style');
          if (icon.checked){
            icon.parentElement.nextElementSibling.classList.add('hidden');
            form.querySelector('p.bar>span').style.width = '85%';
          } else {
            icon.parentElement.nextElementSibling.classList.remove('hidden');
            form.querySelector('p.bar>span').style.width = '75%';
          }
        } else {
          form.querySelector('div.preview>div.spb-label-tooltip>img').src = icon.nextElementSibling.firstElementChild.src;
          form.querySelector('div.preview>div.spb-label-tooltip>img').style.display = 'block';
          form.querySelector('p.bar>span').style.width = '85%';
        }
      }
    });
    let labels = form.querySelectorAll('div.steps label');
    [].forEach.call(labels, label=>{
      label.onclick=e=>{
        if (label.firstElementChild.id == 'noicon'){
          e.preventDefault();
          if (window.innerWidth > 768){
            if (label.firstElementChild.checked){
              label.firstElementChild.checked = false;
            } else {
              label.firstElementChild.checked = true;
            }
            label.firstElementChild.dispatchEvent(new Event('change',{bubbles:true}));
          }
        } else if (label.nextElementSibling && label.nextElementSibling.getAttribute('type') == 'text'){
          label.nextElementSibling.focus();
        } else {
          label.previousElementSibling.checked = true;
          label.previousElementSibling.dispatchEvent(new Event('change',{bubbles:true}));
        }
      }
      if (label.firstElementChild.id == 'noicon'){
        label.ontouchend=e=>{
          e.preventDefault();
          if (label.firstElementChild.checked){
            label.firstElementChild.checked = false;
          } else {
            label.firstElementChild.checked = true;
          }
          label.firstElementChild.dispatchEvent(new Event('change',{bubbles:true}));
        }
      }
      if (label.nextElementSibling && label.nextElementSibling.getAttribute('type') == 'text'){
        label.nextElementSibling.ontouchend=()=>{label.nextElementSibling.focus();}
      }
    });
    if (form.querySelector('p.start')){
      form.querySelector('p.start').onclick=()=>{
        form.classList.remove('active');
        if (form.nextElementSibling){
          form.nextElementSibling.classList.add('active');
        } else {
          if (form.parentElement.firstElementChild.querySelector('input.single-option-selector__radio.js-single-option-selector:checked')){
            form.parentElement.firstElementChild.querySelector('input.single-option-selector__radio.js-single-option-selector:checked').checked = false;
          }
          form.parentElement.firstElementChild.querySelector('input#first').value = '';
          form.parentElement.firstElementChild.querySelector('input#first').dispatchEvent(new Event('keyup', {'bubbles': true}));
          form.parentElement.firstElementChild.querySelector('input#second').value = '';
          form.parentElement.firstElementChild.querySelector('input#second').dispatchEvent(new Event('keyup', {'bubbles': true}));
          if (form.parentElement.firstElementChild.querySelector('div.step3 input:checked')){
            form.parentElement.firstElementChild.querySelector('div.step3 input:checked').checked = false;
          }
          form.parentElement.firstElementChild.querySelector('div.preview>img').src = '';
          form.parentElement.firstElementChild.querySelector('div.preview>div.spb-label-tooltip>img').src = '';
          form.parentElement.firstElementChild.querySelector('div.preview>div.spb-label-tooltip>img').removeAttribute('style');
          form.parentElement.firstElementChild.querySelector('p.bar>span').removeAttribute('style');
          form.parentElement.firstElementChild.querySelector('div.step2').classList.remove('show');
          form.parentElement.firstElementChild.classList.add('active');
        }
      }
    }
    if (form.querySelector('i.fas.fa-arrow-left')){
      form.querySelector('i.fas.fa-arrow-left').onclick=()=>{
        form.classList.remove('active');
        form.previousElementSibling.classList.add('active');
      }
    }
    const prods = document.querySelectorAll('div.card.grid-product__wrapper a');
    [].forEach.call(prods, prod=>{
      prod.onclick=e=>{
        e.preventDefault();
        document.cookie = 'opn=1; path=/; domain=thenamestamp.co; secure=true; expires=' + new Date(new Date().getTime() + 9000).toUTCString();
        window.location.href = prod.href;
      }
    });
  });
  if (document.querySelector('.btn_sp.addtocart_btn.bndl')){
    document.querySelector('.btn_sp.addtocart_btn.bndl').onclick = function(e){
      e.preventDefault();
      this.innerHTML = 'Adding to cart...';
      {% if bndls > 0 or gifts > 0 %}
        var bndl = true; var items = [
          {id:41409529446581, quantity:1, properties: {'Bundle': document.querySelector('h1.product-single__title').innerHTML}},
          {id:41409529053365, quantity:1, properties: {'Bundle': document.querySelector('h1.product-single__title').innerHTML}}
        ];
      {% else %}
        var bndl = false; var items = [];
      {% endif %}
      [].forEach.call(forms, form=>{
        if (form.querySelector('select.product-single__variants.product-form__item')){
          var vrnt = form.querySelector('select.product-single__variants.product-form__item').value;
        } else if (form.querySelector('input[name="id"][type="hidden"]')){
          var vrnt = form.querySelector('input[name="id"][type="hidden"]').value;
        } else if (form.querySelector('input.single-option-selector__radio.js-single-option-selector:checked')){
          var vrnt = form.querySelector('input.single-option-selector__radio.js-single-option-selector:checked').value;
        } else {
          var vrnt = null;
        }
        if (vrnt){
          if (bndl){
            var props = {'Bundle': document.querySelector('h1.product-single__title').innerHTML};
          } else {
            var props = {};
          }
          if (form.querySelector('input#first')){
            if (form.querySelector('input#first').value.length > 0){props['Line 1'] = form.querySelector('input#first').value;}
          }
          if (form.querySelector('input#second')){
            if (form.querySelector('input#second').value.length > 0){props['Line 2'] = form.querySelector('input#second').value;}
          }
          if (form.querySelector('div.step3 input:checked')){
            props['Icon'] = form.querySelector('div.step3 input:checked').value;
          }
          items.push({quantity:1, id:vrnt, properties:props});
        }
      });
      fetch('/cart/add.js', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({'items':items})
      }).then(()=>{
        let form = document.querySelector('form.product-single__form.active');
        form.classList.remove('active');
        form.nextElementSibling.classList.add('active');
        this.innerHTML = 'ADD TO CART';
        fetch('/cart.js', {method: 'GET',headers: {'Content-Type': 'application/json'}}).then(response=>response.json()).then(res=>{
          if (document.querySelector('div.steps.congrats p#fsh')){
            document.querySelector('div.steps.congrats p#fsh>span').style.width = 100 * res.total_price / document.querySelector('div.steps.congrats p#fsh').getAttribute('fsh') + '%';
            if (document.querySelector('div.steps.congrats p#fsh').getAttribute('fsh') > res.total_price){
              document.querySelector('div.steps.congrats p#fsh+p').innerHTML = document.querySelector('div.steps.congrats p#fsh').getAttribute('nofsh').replace('[left]', theme.Currency.formatMoney(document.querySelector('div.steps.congrats p#fsh').getAttribute('fsh') - res.total_price, theme.strings.moneyFormat));
              document.querySelector('div.steps.congrats p#fsh').previousElementSibling.removeAttribute('style');
            } else {
              document.querySelector('div.steps.congrats p#fsh+p').innerHTML = document.querySelector('div.steps.congrats p#fsh').getAttribute('fshtext');
              document.querySelector('div.steps.congrats p#fsh').previousElementSibling.style.display = 'none';
            }
          }
        });
      });
    }
  }
  window.onscroll=()=>{
    if (document.querySelector('p.start.tap.btn.btn--primary.btn--add-to-cart.full').getBoundingClientRect().top < 80){
      document.querySelector('div#stickyAddToCart').classList.add('sa-visible');
    } else {
      document.querySelector('div#stickyAddToCart').classList.remove('sa-visible');
    }
  }
</script>